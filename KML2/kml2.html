<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>KML Click Capture Sample</title>
    <style>
      html, body {
        height: 100%;
        padding: 0;
        margin: 0;
        }
      #map {
       height: 100%;
       width: 100%;
       overflow: hidden;
       float: left;
       border: thin solid #333;
       }
/* 
     #capture {
       height: 360px;
       width: 480px;
       overflow: hidden;
       float: left;
       background-color: #ECECFB;
       border: thin solid #333;
       border-left: none;
       }
*/

    </style>
  </head>
  <body>
    <div id="map"></div>

    <script>
      var map;
//      var src = 'http://localhost:8887/KML2/103.kml';

      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: new google.maps.LatLng(33.57582379, 130.41615488),
          zoom: 18,
          mapTypeId: 'roadmap'
        });

//        var kmlLayer = new google.maps.KmlLayer({
//		  url: 'https://maps.multisoup.co.jp/exsample/layer/kml/s01.kml',
////		  url: 'http://localhost:8887/KML2/103.kml',
////		  url: 'http://localhost:8887/KML2/s01.kml',
////		  url: 's01.kml',
//          suppressInfoWindows: true,
//          preserveViewport: false,
//          map: map
//        });


// https://www.dropbox.com/preview/Google%20Maps/103.kml?role=personal


// https://github.com/efukonsarutantu/Google-Maps.git



        var kmlLayer = new google.maps.KmlLayer(
//		  'https://maps.multisoup.co.jp/exsample/layer/kml/s01.kml',
//		  'http://localhost:8887/KML2/s01.kml',
//		  'http://127.0.0.1:8887/KML2/s01.kml',
//		  'https://www.dropbox.com/preview/Google%20Maps/103.kml?role=personal',
//		  'https://www.dropbox.com/preview/Google%20Maps/103.kml',
//          'https://efukonsarutantu.github.io/KML2/103.kml',
//          'https://efukonsarutantu.github.io/KML2/sendaikoaza.kml',
          'https://efukonsarutantu.github.io/KML2/sendaikoazasentakupol.kml',
//          'https://efukonsarutantu.github.io/KML2/228.kml',
          {
          		suppressInfoWindows: true,
         		preserveViewport: false,		// false: KMLの位置に移動する
//         		preserveViewport: true,			// true:  KMLの位置に移動しなくなる
          		map: map
          });



/*
        kmlLayer.addListener('click', function(event) {
          var content = event.featureData.infoWindowHtml;
          var testimonial = document.getElementById('capture');
          testimonial.innerHTML = content;
        });
*/


// InfowWindow オブジェクトを生成
var infoWindow = new google.maps.InfoWindow();


// KmlLayerのオブジェクトをクリックされたときのリスナーを登録
kmlLayer.addListener('click', function(kmlEvent) {
	// InfowWindow の表示位置
	infoWindow.setPosition(kmlEvent.latLng); 
	// InfowWindow 内の表示内容	
	infoWindow.setContent('<h3>' + kmlEvent.featureData.name + '</h3>' + kmlEvent.featureData.description);
	// InfowWindow を表示
	infoWindow.open(map);
});


      }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBl2Ds8z72WngykjGRR8jOgSFSAn3GfrOE&callback=initMap">
    </script>
  </body>
</html>

